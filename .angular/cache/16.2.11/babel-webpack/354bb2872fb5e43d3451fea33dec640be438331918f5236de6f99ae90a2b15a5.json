{"ast":null,"code":"import { inject } from '@angular/core';\nimport { HttpParams } from '@angular/common/http';\nimport { exhaustMap, take } from 'rxjs/operators';\nimport { AuthService } from './auth.service';\nexport class AuthInterceptorService {\n  constructor() {\n    this.authService = inject(AuthService);\n  }\n  intercept(req, next) {\n    return this.authService.user.pipe(take(1), exhaustMap(user => {\n      if (!user) {\n        return next.handle(req);\n      }\n      const modifiedReq = req.clone({\n        params: new HttpParams().set('auth', user.token)\n      });\n      return next.handle(modifiedReq);\n    }));\n  }\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}